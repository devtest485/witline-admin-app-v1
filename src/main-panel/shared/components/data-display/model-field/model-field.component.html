<div class="tw-space-y-6">
    <!-- Model Field Header -->
    <div class="tw-flex tw-items-center tw-justify-between">
        <div>
            <h4 class="tw-text-lg tw-font-semibold theme-text-primary">
                Model Field Designer
            </h4>
            <p class="tw-text-sm theme-text-secondary tw-mt-1">
                Design and configure form fields with advanced validation
            </p>
        </div>

        <div class="tw-flex tw-gap-2">
            <button nz-button nzType="primary" nzSize="small" (click)="createNewField()" class="theme-transition">
                <i nz-icon nzType="plus"></i>
                New Field
            </button>

            <button nz-button nzType="default" nzSize="small" (click)="importFieldSchema()" class="theme-transition">
                <i nz-icon nzType="upload"></i>
                Import Schema
            </button>

            <button nz-button nzType="default" nzSize="small" (click)="exportFieldSchema()" class="theme-transition">
                <i nz-icon nzType="download"></i>
                Export Schema
            </button>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="tw-text-center tw-py-12">
        <nz-spin nzTip="Loading model fields..." nzSize="large"></nz-spin>
    </div>

    <!-- Field Management Interface -->
    <div *ngIf="!isLoading">

        <nz-tabset nzType="card" [nzTabPosition]="'top'">

            <!-- Field Designer -->
            <nz-tab nzTitle="Field Designer">
                <div class="tw-p-4">

                    <div class="tw-grid tw-grid-cols-12 tw-gap-6">

                        <!-- Field List -->
                        <div class="tw-col-span-4">
                            <nz-card nzTitle="Field List" [nzExtra]="fieldListExtra"
                                class="tw-h-[700px] theme-bg-primary theme-border-primary">

                                <!-- Search and Filter -->
                                <div class="tw-space-y-3 tw-mb-4">
                                    <input nz-input [(ngModel)]="fieldSearchTerm" (ngModelChange)="filterFields()"
                                        placeholder="Search fields..." class="tw-w-full">

                                    <nz-select [(ngModel)]="fieldFilterType" (ngModelChange)="filterFields()"
                                        class="tw-w-full">
                                        <nz-option value="all" nzLabel="All Types"></nz-option>
                                        <nz-option value="input" nzLabel="Input Fields"></nz-option>
                                        <nz-option value="select" nzLabel="Selection Fields"></nz-option>
                                        <nz-option value="layout" nzLabel="Layout Fields"></nz-option>
                                        <nz-option value="validation" nzLabel="With Validation"></nz-option>
                                    </nz-select>
                                </div>

                                <!-- Field Items -->
                                <div class="tw-space-y-2 tw-overflow-auto tw-h-96">
                                    <div *ngFor="let field of filteredModelFields; let i = index" class="tw-p-3 tw-border tw-rounded tw-cursor-pointer theme-bg-secondary theme-border-primary
                               hover:theme-bg-tertiary tw-transition-all tw-duration-200"
                                        [class.tw-ring-2]="selectedFieldIndex === i"
                                        [class.tw-ring-blue-400]="selectedFieldIndex === i"
                                        (click)="selectField(field, i)" cdkDrag [cdkDragData]="field">

                                        <div class="tw-flex tw-items-center tw-justify-between tw-mb-2">
                                            <span class="tw-font-medium tw-text-sm theme-text-primary">
                                                {{ field.key || 'Unnamed Field' }}
                                            </span>
                                            <nz-tag [nzColor]="getFieldTypeColor(field.props?.type ?? 'text')"
                                                class="tw-text-xs">
                                                {{ field.type }}
                                            </nz-tag>
                                        </div>

                                        <div class="tw-text-xs theme-text-secondary tw-mb-2">
                                            {{ field.templateOptions?.label || 'No label' }}
                                        </div>

                                        <div class="tw-flex tw-items-center tw-justify-between tw-text-xs">
                                            <span class="theme-text-tertiary">
                                                {{ field.templateOptions?.required ? 'Required' : 'Optional' }}
                                            </span>
                                            <div class="tw-flex tw-gap-1">
                                                <button nz-button nzType="text" nzSize="small"
                                                    (click)="editField(field, i); $event.stopPropagation()"
                                                    class="tw-w-6 tw-h-6 tw-p-0">
                                                    <i nz-icon nzType="edit" class="tw-text-xs"></i>
                                                </button>
                                                <button nz-button nzType="text" nzSize="small"
                                                    (click)="cloneField(field, i); $event.stopPropagation()"
                                                    class="tw-w-6 tw-h-6 tw-p-0">
                                                    <i nz-icon nzType="copy" class="tw-text-xs"></i>
                                                </button>
                                                <button nz-button nzType="text" nzSize="small" nzDanger
                                                    (click)="deleteField(i); $event.stopPropagation()"
                                                    class="tw-w-6 tw-h-6 tw-p-0">
                                                    <i nz-icon nzType="delete" class="tw-text-xs"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ng-template #fieldListExtra>
                                    <div class="tw-flex tw-gap-1">
                                        <button nz-button nzType="text" nzSize="small" (click)="sortFields()"
                                            nz-tooltip="Sort Fields">
                                            <i nz-icon nzType="sort-ascending"></i>
                                        </button>
                                        <button nz-button nzType="text" nzSize="small" (click)="refreshFields()"
                                            nz-tooltip="Refresh">
                                            <i nz-icon nzType="reload"></i>
                                        </button>
                                    </div>
                                </ng-template>
                            </nz-card>
                        </div>

                        <!-- Field Configuration -->
                        <div class="tw-col-span-8">
                            <nz-card nzTitle="Field Configuration" [nzExtra]="configExtra"
                                class="tw-h-[700px] theme-bg-primary theme-border-primary">

                                <div *ngIf="selectedField" class="tw-h-full tw-overflow-auto">

                                    <nz-steps [nzCurrent]="configStep" nzSize="small" class="tw-mb-6">
                                        <nz-step nzTitle="Basic Settings"></nz-step>
                                        <nz-step nzTitle="Validation Rules"></nz-step>
                                        <nz-step nzTitle="Advanced Options"></nz-step>
                                        <nz-step nzTitle="Preview & Test"></nz-step>
                                    </nz-steps>

                                    <!-- Step 1: Basic Settings -->
                                    <div *ngIf="configStep === 0" class="tw-space-y-4">
                                        <div class="tw-grid tw-grid-cols-2 tw-gap-4">
                                            <div>
                                                <label
                                                    class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                    Field Key *
                                                </label>
                                                <input nz-input [(ngModel)]="selectedField.key" placeholder="fieldKey"
                                                    class="tw-w-full">
                                                <div class="tw-text-xs theme-text-tertiary tw-mt-1">
                                                    Unique identifier for this field
                                                </div>
                                            </div>

                                            <div>
                                                <label
                                                    class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                    Field Type *
                                                </label>
                                                <nz-select [(ngModel)]="selectedField.type"
                                                    (ngModelChange)="onFieldTypeChange()" class="tw-w-full">
                                                    <nz-option *ngFor="let type of availableFieldTypes"
                                                        [nzValue]="type.value" [nzLabel]="type.label">
                                                    </nz-option>
                                                </nz-select>
                                            </div>
                                        </div>

                                        <div class="tw-grid tw-grid-cols-2 tw-gap-4">
                                            <div>
                                                <label
                                                    class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                    Label *
                                                </label>
                                                <input nz-input [(ngModel)]="selectedField.templateOptions.label"
                                                    placeholder="Field Label" class="tw-w-full">
                                            </div>

                                            <div>
                                                <label
                                                    class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                    Placeholder
                                                </label>
                                                <input nz-input [(ngModel)]="selectedField.templateOptions.placeholder"
                                                    placeholder="Enter placeholder text..." class="tw-w-full">
                                            </div>
                                        </div>

                                        <div>
                                            <label
                                                class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                Description
                                            </label>
                                            <textarea nz-input [(ngModel)]="selectedField.templateOptions.description"
                                                rows="3" placeholder="Field description or help text..."
                                                class="tw-w-full">
                          </textarea>
                                        </div>

                                        <div class="tw-space-y-2">
                                            <label nz-checkbox [(ngModel)]="selectedField.templateOptions.required">
                                                Required Field
                                            </label>
                                            <label nz-checkbox [(ngModel)]="selectedField.templateOptions.disabled">
                                                Disabled
                                            </label>
                                            <label nz-checkbox [(ngModel)]="selectedField.hide">
                                                Hidden
                                            </label>
                                        </div>
                                    </div>

                                    <!-- Step 2: Validation Rules -->
                                    <div *ngIf="configStep === 1" class="tw-space-y-4">

                                        <nz-alert nzType="info" nzMessage="Validation Rules"
                                            nzDescription="Configure validation rules to ensure data quality and user experience."
                                            nzShowIcon>
                                        </nz-alert>

                                        <div *ngIf="selectedField.type === 'input'" class="tw-space-y-4">
                                            <div class="tw-grid tw-grid-cols-2 tw-gap-4">
                                                <div>
                                                    <label
                                                        class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                        Minimum Length
                                                    </label>
                                                    <nz-input-number
                                                        [(ngModel)]="selectedField.templateOptions.minLength"
                                                        [nzMin]="0" class="tw-w-full">
                                                    </nz-input-number>
                                                </div>

                                                <div>
                                                    <label
                                                        class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                        Maximum Length
                                                    </label>
                                                    <nz-input-number
                                                        [(ngModel)]="selectedField.templateOptions.maxLength"
                                                        [nzMin]="0" class="tw-w-full">
                                                    </nz-input-number>
                                                </div>
                                            </div>

                                            <div>
                                                <label
                                                    class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                    Pattern (RegEx)
                                                </label>
                                                <input nz-input [(ngModel)]="selectedField.templateOptions.pattern"
                                                    placeholder="^[a-zA-Z0-9]+$" class="tw-w-full">
                                                <div class="tw-text-xs theme-text-tertiary tw-mt-1">
                                                    Regular expression for validation
                                                </div>
                                            </div>
                                        </div>

                                        <div *ngIf="selectedField.type === 'input' && selectedField.templateOptions.type === 'number'"
                                            class="tw-space-y-4">
                                            <div class="tw-grid tw-grid-cols-2 tw-gap-4">
                                                <div>
                                                    <label
                                                        class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                        Minimum Value
                                                    </label>
                                                    <nz-input-number [(ngModel)]="selectedField.templateOptions.min"
                                                        class="tw-w-full">
                                                    </nz-input-number>
                                                </div>

                                                <div>
                                                    <label
                                                        class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                        Maximum Value
                                                    </label>
                                                    <nz-input-number [(ngModel)]="selectedField.templateOptions.max"
                                                        class="tw-w-full">
                                                    </nz-input-number>
                                                </div>
                                            </div>

                                            <div>
                                                <label
                                                    class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                    Step
                                                </label>
                                                <nz-input-number [(ngModel)]="selectedField.templateOptions.step"
                                                    [nzMin]="0" [nzStep]="0.1" class="tw-w-full">
                                                </nz-input-number>
                                            </div>
                                        </div>

                                        <!-- Custom Validation Messages -->
                                        <div class="tw-space-y-3">
                                            <label class="tw-text-sm tw-font-medium theme-text-primary tw-block">
                                                Custom Validation Messages
                                            </label>

                                            <div class="tw-space-y-2">
                                                <div *ngFor="let message of customValidationMessages; let i = index"
                                                    class="tw-flex tw-gap-2">
                                                    <nz-select [(ngModel)]="message.type" class="tw-w-32">
                                                        <nz-option value="required" nzLabel="Required"></nz-option>
                                                        <nz-option value="minlength" nzLabel="Min Length"></nz-option>
                                                        <nz-option value="maxlength" nzLabel="Max Length"></nz-option>
                                                        <nz-option value="pattern" nzLabel="Pattern"></nz-option>
                                                        <nz-option value="email" nzLabel="Email"></nz-option>
                                                    </nz-select>
                                                    <input nz-input [(ngModel)]="message.message"
                                                        placeholder="Custom error message" class="tw-flex-1">
                                                    <button nz-button nzType="default" nzSize="small" nzDanger
                                                        (click)="removeValidationMessage(i)">
                                                        <i nz-icon nzType="delete"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <button nz-button nzType="dashed" nzSize="small"
                                                (click)="addValidationMessage()">
                                                <i nz-icon nzType="plus"></i>
                                                Add Message
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Step 3: Advanced Options -->
                                    <div *ngIf="configStep === 2" class="tw-space-y-4">

                                        <!-- Conditional Logic -->
                                        <nz-card nzTitle="Conditional Logic" nzSize="small" class="theme-bg-secondary">
                                            <div class="tw-space-y-3">
                                                <div>
                                                    <label
                                                        class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                        Show When
                                                    </label>
                                                    <textarea nz-input [(ngModel)]="selectedField.hideExpression"
                                                        rows="2" placeholder="model.otherField === 'value'"
                                                        class="tw-w-full">
                              </textarea>
                                                    <div class="tw-text-xs theme-text-tertiary tw-mt-1">
                                                        JavaScript expression to control field visibility
                                                    </div>
                                                </div>
                                            </div>
                                        </nz-card>

                                        <!-- Field Dependencies -->
                                        <nz-card nzTitle="Field Dependencies" nzSize="small" class="theme-bg-secondary">
                                            <div class="tw-space-y-3">
                                                <div>
                                                    <label
                                                        class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                        Depends On Fields
                                                    </label>
                                                    <nz-select nzMode="multiple"
                                                        [(ngModel)]="selectedField.dependencies"
                                                        placeholder="Select dependent fields" class="tw-w-full">
                                                        <nz-option *ngFor="let field of modelFields"
                                                            [nzValue]="field.key" [nzLabel]="field.key">
                                                        </nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                        </nz-card>

                                        <!-- Styling Options -->
                                        <nz-card nzTitle="Styling Options" nzSize="small" class="theme-bg-secondary">
                                            <div class="tw-space-y-3">
                                                <div class="tw-grid tw-grid-cols-2 tw-gap-4">
                                                    <div>
                                                        <label
                                                            class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                            CSS Class
                                                        </label>
                                                        <input nz-input [(ngModel)]="selectedField.className"
                                                            placeholder="custom-field-class" class="tw-w-full">
                                                    </div>

                                                    <div>
                                                        <label
                                                            class="tw-text-sm tw-font-medium theme-text-primary tw-block tw-mb-2">
                                                            Field Width
                                                        </label>
                                                        <nz-select
                                                            [(ngModel)]="selectedField.templateOptions.fieldWidth"
                                                            class="tw-w-full">
                                                            <nz-option value="full" nzLabel="Full Width"></nz-option>
                                                            <nz-option value="half" nzLabel="Half Width"></nz-option>
                                                            <nz-option value="third" nzLabel="Third Width"></nz-option>
                                                            <nz-option value="quarter"
                                                                nzLabel="Quarter Width"></nz-option>
                                                        </nz-select>
                                                    </div>
                                                </div>
                                            </div>
                                        </nz-card>
                                    </div>

                                    <!-- Step 4: Preview & Test -->
                                    <div *ngIf="configStep === 3" class="tw-space-y-4">

                                        <nz-alert nzType="success" nzMessage="Field Preview"
                                            nzDescription="Test your field configuration and see how it will appear in the form."
                                            nzShowIcon>
                                        </nz-alert>

                                        <!-- Field Preview -->
                                        <nz-card nzTitle="Live Preview" class="theme-bg-secondary">
                                            <form [formGroup]="previewForm" class="tw-space-y-4">
                                                <formly-form [form]="previewForm" [fields]="[selectedField]"
                                                    [model]="previewModel">
                                                </formly-form>
                                            </form>
                                        </nz-card>

                                        <!-- Field Configuration Summary -->
                                        <nz-card nzTitle="Configuration Summary" class="theme-bg-secondary">
                                            <div class="tw-space-y-2 tw-text-sm">
                                                <div class="tw-flex tw-justify-between">
                                                    <span class="theme-text-secondary">Key:</span>
                                                    <code class="tw-bg-gray-100 tw-px-1 tw-rounded theme-bg-tertiary">
                                {{ selectedField.key }}
                              </code>
                                                </div>
                                                <div class="tw-flex tw-justify-between">
                                                    <span class="theme-text-secondary">Type:</span>
                                                    <nz-tag [nzColor]="getFieldTypeColor(selectedField.type)">
                                                        {{ selectedField.type }}
                                                    </nz-tag>
                                                </div>
                                                <div class="tw-flex tw-justify-between">
                                                    <span class="theme-text-secondary">Required:</span>
                                                    <span>{{ selectedField.templateOptions?.required ? 'Yes' : 'No'
                                                        }}</span>
                                                </div>
                                                <div class="tw-flex tw-justify-between">
                                                    <span class="theme-text-secondary">Validation Rules:</span>
                                                    <span>{{ getValidationRuleCount() }}</span>
                                                </div>
                                            </div>
                                        </nz-card>
                                    </div>

                                    <!-- Step Navigation -->
                                    <div class="tw-flex tw-justify-between tw-pt-6 tw-border-t theme-border-primary">
                                        <button nz-button nzType="default" [disabled]="configStep === 0"
                                            (click)="configStep = configStep - 1">
                                            <i nz-icon nzType="left"></i>
                                            Previous
                                        </button>

                                        <div class="tw-flex tw-gap-2">
                                            <button nz-button nzType="default" (click)="testField()">
                                                <i nz-icon nzType="play-circle"></i>
                                                Test Field
                                            </button>

                                            <button nz-button nzType="primary" *ngIf="configStep === 3"
                                                (click)="saveFieldConfiguration()">
                                                <i nz-icon nzType="save"></i>
                                                Save Field
                                            </button>

                                            <button nz-button nzType="primary" *ngIf="configStep < 3"
                                                (click)="configStep = configStep + 1">
                                                Next
                                                <i nz-icon nzType="right"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- No Field Selected -->
                                <div *ngIf="!selectedField" class="tw-h-full tw-flex tw-items-center tw-justify-center">
                                    <div class="tw-text-center">
                                        <i nz-icon nzType="select" class="tw-text-4xl theme-text-tertiary tw-mb-4"></i>
                                        <h4 class="tw-text-lg tw-font-medium theme-text-primary tw-mb-2">
                                            No Field Selected
                                        </h4>
                                        <p class="tw-text-sm theme-text-secondary tw-mb-4">
                                            Select a field from the list to configure its properties.
                                        </p>
                                        <button nz-button nzType="primary" (click)="createNewField()">
                                            <i nz-icon nzType="plus"></i>
                                            Create New Field
                                        </button>
                                    </div>
                                </div>

                                <ng-template #configExtra>
                                    <div class="tw-flex tw-gap-1">
                                        <button nz-button nzType="text" nzSize="small"
                                            (click)="resetFieldConfiguration()" nz-tooltip="Reset Configuration">
                                            <i nz-icon nzType="undo"></i>
                                        </button>
                                        <button nz-button nzType="text" nzSize="small"
                                            (click)="duplicateFieldConfiguration()" nz-tooltip="Duplicate Field">
                                            <i nz-icon nzType="copy"></i>
                                        </button>
                                    </div>
                                </ng-template>
                            </nz-card>
                        </div>
                    </div>
                </div>
            </nz-tab>

            <!-- Field Schema -->
            <nz-tab nzTitle="Schema Editor">
                <div class="tw-p-4 tw-space-y-6">

                    <!-- Schema Overview -->
                    <div class="tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-4">
                        <nz-card class="tw-text-center theme-bg-primary theme-border-primary">
                            <nz-statistic nzTitle="Total Fields" [nzValue]="modelFields.length"
                                [nzValueStyle]="{ color: themeService.isCustom() ? 'var(--theme-primary)' : '#1890ff' }">
                            </nz-statistic>
                        </nz-card>

                        <nz-card class="tw-text-center theme-bg-primary theme-border-primary">
                            <nz-statistic nzTitle="Required Fields" [nzValue]="getRequiredFieldCount()"
                                [nzValueStyle]="{ color: themeService.isCustom() ? 'var(--theme-error)' : '#ff4d4f' }">
                            </nz-statistic>
                        </nz-card>

                        <nz-card class="tw-text-center theme-bg-primary theme-border-primary">
                            <nz-statistic nzTitle="With Validation" [nzValue]="getValidatedFieldCount()"
                                [nzValueStyle]="{ color: themeService.isCustom() ? 'var(--theme-success)' : '#52c41a' }">
                            </nz-statistic>
                        </nz-card>
                    </div>

                    <!-- Schema Editor -->
                    <nz-card nzTitle="JSON Schema Editor" class="theme-bg-primary theme-border-primary">
                        <div class="tw-space-y-4">
                            <div class="tw-flex tw-justify-between tw-items-center">
                                <div class="tw-flex tw-gap-2">
                                    <button nz-button nzType="default" nzSize="small" (click)="formatSchema()">
                                        <i nz-icon nzType="code"></i>
                                        Format
                                    </button>
                                    <button nz-button nzType="default" nzSize="small" (click)="validateSchema()">
                                        <i nz-icon nzType="check"></i>
                                        Validate
                                    </button>
                                    <button nz-button nzType="default" nzSize="small" (click)="exportSchema()">
                                        <i nz-icon nzType="download"></i>
                                        Export
                                    </button>
                                </div>

                                <nz-select [(ngModel)]="schemaFormat" class="tw-w-32">
                                    <nz-option value="formly" nzLabel="Formly"></nz-option>
                                    <nz-option value="jsonschema" nzLabel="JSON Schema"></nz-option>
                                    <nz-option value="openapi" nzLabel="OpenAPI"></nz-option>
                                </nz-select>
                            </div>

                            <textarea class="tw-w-full tw-h-96 tw-font-mono tw-text-sm tw-p-3 tw-border tw-rounded
                           theme-bg-primary theme-border-primary theme-text-primary" [(ngModel)]="schemaJson"
                                placeholder="Schema JSON will appear here...">
                  </textarea>

                            <div class="tw-flex tw-justify-end tw-gap-2">
                                <button nz-button nzType="default" (click)="loadSchemaFromJson()">
                                    Load from JSON
                                </button>
                                <button nz-button nzType="primary" (click)="applySchemaChanges()">
                                    <i nz-icon nzType="check"></i>
                                    Apply Changes
                                </button>
                            </div>
                        </div>
                    </nz-card>
                </div>
            </nz-tab>

            <!-- Field Analytics -->
            <nz-tab nzTitle="Analytics">
                <div class="tw-p-4 tw-space-y-6">

                    <!-- Usage Analytics -->
                    <nz-card nzTitle="Field Usage Analytics" class="theme-bg-primary theme-border-primary">
                        <nz-table [nzData]="fieldAnalytics" [nzSize]="'small'">
                            <thead>
                                <tr>
                                    <th>Field</th>
                                    <th>Type</th>
                                    <th>Usage Count</th>
                                    <th>Error Rate</th>
                                    <th>Completion Rate</th>
                                    <th>Performance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let analytics of fieldAnalytics">
                                    <td>{{ analytics.fieldKey }}</td>
                                    <td>
                                        <nz-tag [nzColor]="getFieldTypeColor(analytics.fieldType)">
                                            {{ analytics.fieldType }}
                                        </nz-tag>
                                    </td>
                                    <td>{{ analytics.usageCount }}</td>
                                    <td>
                                        <span [style.color]="analytics.errorRate > 20 ? '#ff4d4f' : '#52c41a'">
                                            {{ analytics.errorRate }}%
                                        </span>
                                    </td>
                                    <td>
                                        <nz-progress [nzPercent]="analytics.completionRate" [nzSize]="'small'"
                                            [nzStrokeColor]="analytics.completionRate > 80 ? '#52c41a' : '#faad14'">
                                        </nz-progress>
                                    </td>
                                    <td>
                                        <nz-rate [ngModel]="analytics.performance" nzDisabled [nzCount]="5"
                                            class="tw-text-xs">
                                        </nz-rate>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </nz-card>
                </div>
            </nz-tab>
        </nz-tabset>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && modelFields.length === 0"
        class="tw-text-center tw-py-12 theme-bg-secondary tw-rounded-lg">
        <i nz-icon nzType="database" class="tw-text-4xl theme-text-tertiary tw-mb-4"></i>
        <h4 class="tw-text-lg tw-font-medium theme-text-primary tw-mb-2">
            No Model Fields Created
        </h4>
        <p class="tw-text-sm theme-text-secondary tw-mb-4">
            Start designing your data model by creating fields.
        </p>
        <button nz-button nzType="primary" (click)="createNewField()">
            <i nz-icon nzType="plus"></i>
            Create First Field
        </button>
    </div>
</div>